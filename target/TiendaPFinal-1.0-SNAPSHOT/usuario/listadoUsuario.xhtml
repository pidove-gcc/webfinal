<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>
            #{msg['usuario.tituloGeneral']}
        </title>
        <h:outputStylesheet library="css" name="bootstrap.min.css"/>
        <h:outputScript library="js" name="bootstrap.min.js"/>
        <h:outputScript library="js" name="jquery-3.4.1.slim.min.js"/>
        <h:outputScript library="js" name="popper.min.js"/>
        <f:event type="preRenderView" listener="#{usuarioMB.verificarsesion()}"/>
    </h:head>
    <h:body style="background-color: #9c9c9c;">
        <div class="container">
            <div class="card border-dark mb-3">
                <div class="card-header text-white" style="background-color: #000000;">
                    <h1>
                        #{msg['usuario.tituloLista']}
                    </h1>
                </div>
                <div class="card-body text-primary">
                    <div class="table-responsive">
                        <h:panelGrid>
                            <f:view>
                                <h:form id="frmUsuario">
                                    <h:dataTable value="#{usuarioMB.listaDeUsuarios}" var="dto" class="table table-hover table-sm text-white" style="background-color: #000000;">
                                        <h:column>
                                            <f:facet name="header">
                                                <h:outputText value="#{msg.idUsuario}"/>
                                            </f:facet>
                                            <h:outputText value="#{dto.idUsuario}"/>
                                        </h:column>
                                        <h:column>
                                            <f:facet name="header">
                                                <h:outputText value="#{msg['usuario.nombre']}"/>
                                            </f:facet>
                                            <h:outputText value="#{dto.nombre}"/>
                                        </h:column>
                                        <h:column>
                                            <f:facet name="header">
                                                <h:outputText value="#{msg['usuario.paterno']}"/>
                                            </f:facet>
                                            <h:outputText value="#{dto.paterno}"/>
                                        </h:column>                                        
                                        <h:column>
                                            <f:facet name="header">
                                                <h:outputText value="#{msg['usuario.materno']}"/>
                                            </f:facet>
                                            <h:outputText value="#{dto.materno}"/>
                                        </h:column>
                                        <h:column>
                                            <f:facet name="header">
                                                <h:outputText value="#{msg['usuario.email']}"/>
                                            </f:facet>
                                            <h:outputText value="#{dto.email}"/>
                                        </h:column>
                                        <h:column>
                                            <f:facet name="header">
                                                <h:outputText value="#{msg['usuario.nombreUsuario']}"/>
                                            </f:facet>
                                            <h:outputText value="#{dto.nombreUsuario}"/>
                                        </h:column>
                                        <h:column>
                                            <f:facet name="header">
                                                <h:outputText value="#{msg['usuario.claveUsuario']}"/>
                                            </f:facet>
                                            <h:outputText value="#{dto.claveUsuario}"/>
                                        </h:column>
                                        <h:column>
                                            <f:facet name="header">
                                                <h:outputText value="#{msg.acciones}"/>
                                            </f:facet>
                                            <h:commandLink action="#{usuarioMB.prepareUpdate()}"> 
                                                <f:param name="clavesel" value="#{dto.idUsuario}"/>
                                                <h:graphicImage value="/resources/iconos/interface-blue.png" width="30" height="30" /> 
                                            </h:commandLink>
                                            <h:commandLink action="#{usuarioMB.delete()}">
                                                <f:param name="claveSel" value="#{dto.idUsuario}"/>
                                                <h:graphicImage value="/resources/iconos/rubbish-red.png" width="30" height="30" />
                                            </h:commandLink>
                                        </h:column>
                                    </h:dataTable>

                                    <h:commandLink action="#{usuarioMB.prepareAdd()}">
                                        <h:graphicImage value="/resources/iconos/interfaceadd.png" width="30" height="30"/>
                                    </h:commandLink>
                                    <h:commandButton styleClass="btn btn-success" value="volver al inicio" action="#{usuarioMB.ini()}"/>
                                </h:form>
                            </f:view>
                        </h:panelGrid>
                    </div>
                </div>
            </div>
        </div>
    </h:body>
</html>

